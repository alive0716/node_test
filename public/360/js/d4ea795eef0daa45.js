(function(){function e(){this._init.apply(this,arguments)}function t(){this._init.apply(this,arguments)}function n(){this._init.apply(this,arguments)}$.extend(e.prototype,{_init:function(){this._queue=[],this.length=0},enqueue:function(e){if(!Array.isArray(e)){this._queue.push(e),this.length++;return}var t=0,n=e.length;for(;t<n;t++)this._queue.push(e[t]);this.length+=n},dequeue:function(){if(!this.length)return this.onComplete();var e=this._queue.shift();this.length--;var t=e.task,n=e.context||this,r=e.args||[];t.apply(n,r)},onComplete:function(){}}),$.extend(t.prototype,{_init:function(t){this.callback=new Function,this._loadedCount=0,this._called=!1,this.queue=new e,this.total=t.length,this.addImages(t)},load:function(e){e&&(this.callback=e),this.queue.dequeue()},onProgress:function(e,t){},addImage:function(e){var t=this,n=this.queue.length;this.queue.enqueue({task:function(){var r=new Image;r.onload=t.onImageLoad(n),r.onerror=t.onImageError(n),r.src=e,this.dequeue()}})},onImageLoad:function(e){var t=this;return function(){t._loadedCount++,t._loadedCount>=t.total&&!t._called&&(t._called=!0,setTimeout(t.callback,500)),t.onProgress(t._loadedCount,t.total)}},onImageError:function(e){return this.onImageLoad(e)},addImages:function(e){var t=this;e.forEach(function(e){t.addImage(e)})},setCallback:function(e){e&&(this.callback=e)}}),$.extend(n.prototype,{_init:function(){this.animations=new e},add:function(e,t,n){function r(){var r=this,i=$(e).css("display","block");i.on("webkitAnimationEnd",function(){i.off("webkitAnimationEnd"),n.remove&&i.removeClass(t),n.onComplete&&n.onComplete(),setTimeout(function(){r.dequeue()},0)}),i.addClass(t),n.infinite&&r.dequeue()}n=n||{},this.animations.enqueue({task:r})},play:function(){this.animations.onComplete=this.onComplete,this.animations.dequeue()},onComplete:function(){}}),window.Preloader=t,window.Animation=n})();